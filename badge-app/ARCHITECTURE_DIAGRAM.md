# Real-Time Tracking Map - Architecture & Data Flow

## Component Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MAP.JSX                              â”‚
â”‚  Real-Time Career Fair Floor Tracking Component             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ GEOLOC â”‚          â”‚ STATE    â”‚        â”‚ HANDLERS â”‚
    â”‚ ATION  â”‚          â”‚ MGMT     â”‚        â”‚ & LOGIC  â”‚
    â”‚ SETUP  â”‚          â”‚ (Hooks)  â”‚        â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                    â”‚                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  JSX   â”‚          â”‚  EVENT   â”‚        â”‚ ANALYTICSâ”‚
    â”‚ RENDER â”‚          â”‚ TRACKING â”‚        â”‚ LOGGING  â”‚
    â”‚        â”‚          â”‚          â”‚        â”‚(Amplitude)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Geolocation Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser Geolocation API            â”‚
â”‚   navigator.geolocation.watchPosition()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ GPS Data:
                    â”‚ - latitude
                    â”‚ - longitude
                    â”‚ - accuracy
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Callback Handler                   â”‚
â”‚   Updates React State                â”‚
â”‚   - setUserLocation()                â”‚
â”‚   - setUserPixelPosition()           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Coordinate Conversion              â”‚
â”‚   GPS (lat/lon) â†’ Pixel (x%, y%)    â”‚
â”‚                                      â”‚
â”‚   Calculate delta from initial pos:  â”‚
â”‚   latDiff = new_lat - initial_lat    â”‚
â”‚   lonDiff = new_lon - initial_lon    â”‚
â”‚                                      â”‚
â”‚   Convert to meters:                 â”‚
â”‚   meters_lat = latDiff Ã— 111000      â”‚
â”‚   meters_lon = lonDiff Ã— cos(lat)Ã—111k
â”‚                                      â”‚
â”‚   Convert to pixels (0-100%):        â”‚
â”‚   pixel_x = 50 + (m_lon / 25m) Ã— 10 â”‚
â”‚   pixel_y = 50 - (m_lat / 25m) Ã— 10 â”‚
â”‚                                      â”‚
â”‚   Constrain to bounds (10%-90%):     â”‚
â”‚   x = max(10, min(90, pixel_x))      â”‚
â”‚   y = max(10, min(90, pixel_y))      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   React State Update                 â”‚
â”‚   userPixelPosition = {x: 45, y: 55} â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Component Re-Render                â”‚
â”‚   - Update user dot position         â”‚
â”‚   - Recalculate distances            â”‚
â”‚   - Update sidebar info              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Analytics Logging                  â”‚
â”‚   Amplitude Event:                   â”‚
â”‚   - user_location_updated            â”‚
â”‚   - timestamp                        â”‚
â”‚   - position data                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Map Layout (Bird's Eye View)

```
                        MAP CANVAS (100% Ã— 100%)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                              â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
    â”‚  â”‚   LIGHT SQUARE (Room Area)         â”‚     â”‚
    â”‚  â”‚   (10% - 90% bounds)               â”‚     â”‚
    â”‚  â”‚                                    â”‚     â”‚
    â”‚  â”‚  ğŸŸ¦ Google          ğŸŸ© Shopify    â”‚     â”‚
    â”‚  â”‚  (10%,10%)         (90%,10%)      â”‚     â”‚
    â”‚  â”‚                                    â”‚     â”‚
    â”‚  â”‚          â— User (Red Dot)         â”‚     â”‚
    â”‚  â”‚         (Real-time position)      â”‚     â”‚
    â”‚  â”‚                                    â”‚     â”‚
    â”‚  â”‚  ğŸŸª Amplitude      ğŸŸ§ Foresters  â”‚     â”‚
    â”‚  â”‚  (10%,90%)         (90%,90%)      â”‚     â”‚
    â”‚  â”‚                                    â”‚     â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
    â”‚                                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    Coordinates:
    - Google: (10%, 10%)        [Top-Left]
    - Shopify: (90%, 10%)       [Top-Right]
    - Amplitude: (10%, 90%)     [Bottom-Left]
    - Foresters: (90%, 90%)     [Bottom-Right]
    
    Room Size: 50m Ã— 50m
    User Start: Center (50%, 50%)
    Update Rate: Every 1 second (maximumAge: 1000ms)
```

## State Variables

```javascript
// User Location State
userLocation = {
  latitude: 40.7128,           // GPS latitude
  longitude: -74.0060,         // GPS longitude
  accuracy: 25                 // Â±25 meters
}

// User Position on Map
userPixelPosition = {
  x: 50,                       // Percentage width (0-100)
  y: 50                        // Percentage height (0-100)
}

// UI State
searchQuery = ""               // Search filter
selectedTag = null             // Category filter
selectedBooth = null           // Currently selected booth
filteredBooths = [...]         // Filtered booth list

// Tracking State
locationLoading = false        // Initial geolocation pending
locationError = null           // Error message if any
```

## Event Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Opens Map â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser Shows Permission Prompt      â”‚
â”‚ "Allow access to your location?"     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€ User Clicks [Allow]
         â”‚           â”‚
         â”‚           â–¼
         â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   â”‚ getCurrentPosition()       â”‚
         â”‚   â”‚ - Detect initial location â”‚
         â”‚   â”‚ - Set center point        â”‚
         â”‚   â”‚ - setLocationLoading(false)
         â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚           â”‚
         â”‚           â–¼
         â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   â”‚ watchPosition()            â”‚
         â”‚   â”‚ - Start continuous tracking
         â”‚   â”‚ - Update every 1 second   â”‚
         â”‚   â”‚ - Calculate pixel positionâ”‚
         â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚           â”‚
         â”‚           â–¼
         â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   â”‚ Map Renders               â”‚
         â”‚   â”‚ - Floor image background  â”‚
         â”‚   â”‚ - 4 booth markers         â”‚
         â”‚   â”‚ - Red user dot (pulsing)  â”‚
         â”‚   â”‚ - Sidebar with booths     â”‚
         â”‚   â”‚ - Location status panel   â”‚
         â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â””â”€ User Clicks [Block]
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ setLocationError()         â”‚
            â”‚ Show error message         â”‚
            â”‚ No tracking available      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Distance Calculation

```
When user clicks booth or hovers over booth item:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ getDistanceToUser(booth)             â”‚
â”‚                                      â”‚
â”‚ 1. Get booth coordinates:            â”‚
â”‚    dx = booth.x - userPixelPosition.x
â”‚    dy = booth.y - userPixelPosition.y
â”‚                                      â”‚
â”‚ 2. Calculate pixel distance:         â”‚
â”‚    pixelDistance = âˆš(dxÂ² + dyÂ²)      â”‚
â”‚                                      â”‚
â”‚ 3. Convert to meters:                â”‚
â”‚    meters â‰ˆ pixelDistance Ã— 1        â”‚
â”‚    (1% of map â‰ˆ 1 meter)             â”‚
â”‚                                      â”‚
â”‚ 4. Display:                          â”‚
â”‚    "~{distance}m away"               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Examples:
- User at (50%, 50%), Booth at (10%, 10%)
  â†’ dx = -40, dy = -40
  â†’ distance = âˆš(1600 + 1600) = 56.6 â‰ˆ 57m

- User at (50%, 50%), Booth at (90%, 90%)
  â†’ dx = 40, dy = 40
  â†’ distance = âˆš(1600 + 1600) = 56.6 â‰ˆ 57m

- User at (50%, 50%), Booth at (60%, 50%)
  â†’ dx = 10, dy = 0
  â†’ distance = âˆš(100 + 0) = 10 â‰ˆ 10m
```

## Booth Details Interaction

```
User Clicks Booth Marker
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleBoothClick(booth)      â”‚
â”‚ 1. setSelectedBooth(booth)   â”‚
â”‚ 2. Trigger re-render         â”‚
â”‚ 3. Log to Amplitude          â”‚
â”‚    - booth_clicked event     â”‚
â”‚    - booth ID & name         â”‚
â”‚    - user position           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Display Details Popup        â”‚
â”‚ - Booth name                 â”‚
â”‚ - Company name               â”‚
â”‚ - Description                â”‚
â”‚ - Distance: ~{X}m away       â”‚
â”‚ - Tags (interests)           â”‚
â”‚ - Key people                 â”‚
â”‚ - Skills/expertise           â”‚
â”‚ - Close button (Ã—)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
User Views & Closes Popup
```

## Temperature Map Concept (Future)

```
As user moves around, could visualize proximity:

    Cold Zone     â”‚    Warm Zone    â”‚   Hot Zone
   (Far from     â”‚  (Medium dist)  â”‚ (Close to
    booths)      â”‚                 â”‚  booth)
    
    Blue         â”‚     Yellow      â”‚    Red
    50m+         â”‚      20-50m     â”‚   <20m
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                 â”‚
    â”‚  ğŸ”µ  Blue = Far (>50m)          â”‚
    â”‚  ğŸŸ¡  Yellow = Near (20-50m)     â”‚
    â”‚  ğŸ”´  Red = Very Close (<20m)    â”‚
    â”‚                                 â”‚
    â”‚  Booth Colors Fade Based on     â”‚
    â”‚  Distance to User               â”‚
    â”‚                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary

**Current State: MVP (Minimum Viable Product)**
- âœ… Real-time GPS tracking
- âœ… 4 booths in corners
- âœ… Distance calculations
- âœ… Interactive markers
- âœ… Analytics logging

**Enhancements Possible:**
- ğŸ”„ Thermal/proximity visualization
- ğŸ”„ Booth visit duration tracking
- ğŸ”„ Route optimization
- ğŸ”„ Multi-floor support
- ğŸ”„ BLE beacon integration
